{"version":3,"sources":["webpack:///./src/pages/index.js","webpack:///./src/pages/index.module.css"],"names":["BlogIndex","props","data","location","siteTitle","site","siteMetadata","title","posts","allMarkdownRemark","edges","useState","list","setList","window","hm","document","createElement","src","s","getElementsByTagName","parentNode","insertBefore","page","setPage","useEffect","console","log","slice","map","node","frontmatter","fields","slug","key","style","marginBottom","rhythm","boxShadow","to","date","dangerouslySetInnerHTML","__html","description","excerpt","totalPage","Math","ceil","length","arr","i","push","className","styles","pagingBox","onClick","pagingItem","item","index","pagingActive","lineHeight","renderPaging","pageQuery","module","exports"],"mappings":"2FAAA,+IAiIeA,UAzHG,SAACC,GAAW,IACpBC,EAAmBD,EAAnBC,KAAMC,EAAaF,EAAbE,SACRC,EAAYF,EAAKG,KAAKC,aAAaC,MACnCC,EAAQN,EAAKO,kBAAkBC,MAHV,EAIHC,mBAAS,IAA1BC,EAJoB,KAIdC,EAJc,KAK3B,GAAsB,oBAAXC,OAAwB,CACjC,IAAIC,EAAKC,SAASC,cAAc,UAChCF,EAAGG,IAAM,iEACT,IAAIC,EAAIH,SAASI,qBAAqB,UAAU,GAChDD,EAAEE,WAAWC,aAAaP,EAAII,GATL,MAWHR,mBAAS,GAA1BY,EAXoB,KAWdC,EAXc,KAa3BC,qBAAU,WACRC,QAAQC,IAAI1B,GACZY,EAAQL,EAAMoB,MAHD,EAGOL,EAHP,GAGuBA,EAAO,OAC1C,CAACA,IAgGJ,OACE,kBAAC,IAAD,CAAQpB,SAAUA,EAAUI,MAAOH,GA9FjC,oCACGQ,EAAKiB,KAAI,YAAe,IAAZC,EAAW,EAAXA,KACLvB,EAAQuB,EAAKC,YAAYxB,OAASuB,EAAKE,OAAOC,KACpD,OACE,6BAASC,IAAKJ,EAAKE,OAAOC,MACxB,gCACE,wBACEE,MAAO,CACLC,aAAcC,YAAO,EAAI,KAG3B,kBAAC,OAAD,CAAMF,MAAO,CAAEG,UAAU,QAAWC,GAAIT,EAAKE,OAAOC,MACjD1B,IAGL,+BAAQuB,EAAKC,YAAYS,OAE3B,iCACE,uBACEC,wBAAyB,CACvBC,OAAQZ,EAAKC,YAAYY,aAAeb,EAAKc,iBAY1C,WACnB,IAAIC,EAAYC,KAAKC,KAAKvC,EAAMwC,OAxCnB,GAyCbtB,QAAQC,IAAI,YAAakB,GAEzB,IADA,IAAII,EAAM,GACDC,EAAI,EAAGA,EAAIL,EAAWK,IAC7BD,EAAIE,KAAKD,GAEX,OACE,yBAAKE,UAAWC,IAAOC,WACrB,yBACEC,QAAS,kBAAM/B,EAAQ,IACvB4B,UAAWC,IAAOG,YAFpB,MAGA,yBACED,QAAS,WACHhC,GAAQ,GACZC,EAAQD,EAAO,IAEjB6B,UAAWC,IAAOG,YALpB,OAMCP,EAAIpB,KAAI,SAAC4B,EAAMC,GACd,OAAIA,GAAS,GASFb,EAAYa,EAAQ,GASpBnC,IAASmC,EAhBhB,yBACExB,IAAKwB,EACLN,UAAcC,IAAOG,WAAZ,KAA0BjC,IAASmC,GAASL,IAAOM,cAC5DJ,QAAS,kBAAM/B,EAAQkC,KACtBA,EAAQ,GAqBJnC,EAAO,IAAMmC,GAAmB,IAAVA,EACxB,yBAAKvB,MAAO,CAAEyB,WAAY,SAA1B,OAEA,QAGX,yBACEL,QAAS,WACHV,GAAatB,EAAO,GACxBC,EAAQD,EAAO,IAEjB6B,UAAWC,IAAOG,YALpB,QAaDK,KAOA,IAAMC,EAAS,c,qBClItBC,EAAOC,QAAU,CAAC,UAAY,iCAAiC,WAAa,kCAAkC,aAAe","file":"component---src-pages-index-js-d6cbdb8d87496c7725cf.js","sourcesContent":["import React, { useEffect, useState } from \"react\"\nimport { Link, graphql } from \"gatsby\"\nimport Layout from \"../components/layout\"\nimport SEO from \"../components/seo\"\nimport { rhythm } from \"../utils/typography\"\n\nimport styles from './index.module.css'\n\nconst BlogIndex = (props) => {\n  const { data, location } = props\n  const siteTitle = data.site.siteMetadata.title\n  const posts = data.allMarkdownRemark.edges\n  const [list, setList] = useState([])\n  if (typeof window !== 'undefined') {\n    var hm = document.createElement(\"script\");\n    hm.src = \"https://s9.cnzz.com/z_stat.php?id=1278835659&web_id=1278835659\";\n    var s = document.getElementsByTagName(\"script\")[0];\n    s.parentNode.insertBefore(hm, s);\n  }\n  const [page, setPage] = useState(0)\n  const length = 5\n  useEffect(() => {\n    console.log(props)\n    setList(posts.slice(page * length, (page + 1) * length))\n  }, [page])\n  const renderPage = () => {\n    return (\n      <>\n        {list.map(({ node }) => {\n          const title = node.frontmatter.title || node.fields.slug\n          return (\n            <article key={node.fields.slug}>\n              <header>\n                <h3\n                  style={{\n                    marginBottom: rhythm(1 / 4),\n                  }}\n                >\n                  <Link style={{ boxShadow: `none` }} to={node.fields.slug}>\n                    {title}\n                  </Link>\n                </h3>\n                <small>{node.frontmatter.date}</small>\n              </header>\n              <section>\n                <p\n                  dangerouslySetInnerHTML={{\n                    __html: node.frontmatter.description || node.excerpt,\n                  }}\n                />\n              </section>\n            </article>\n          )\n        })}\n      </>\n    )\n\n  }\n\n  const renderPaging = () => {\n    let totalPage = Math.ceil(posts.length / length)\n    console.log('totalPage', totalPage)\n    let arr = []\n    for (let i = 0; i < totalPage; i++) {\n      arr.push(i)\n    }\n    return (\n      <div className={styles.pagingBox}>\n        <div\n          onClick={() => setPage(0)}\n          className={styles.pagingItem}>首页</div>\n        <div\n          onClick={() => {\n            if (page <= 0) return\n            setPage(page - 1)\n          }}\n          className={styles.pagingItem}>上一页</div>\n        {arr.map((item, index) => {\n          if (index <= 5) {\n            return (\n              <div\n                key={index}\n                className={`${styles.pagingItem} ${page === index && styles.pagingActive}`}\n                onClick={() => setPage(index)}>\n                {index + 1}\n              </div>\n            )\n          } else if (totalPage - index < 3) {\n            return (\n              <div\n                key={index}\n                className={`${styles.pagingItem} ${page === index && styles.pagingActive}`}\n                onClick={() => setPage(index)}>\n                {index + 1}\n              </div>\n            )\n          } else if (page === index) {\n            return (\n              <div\n                key={index}\n                className={`${styles.pagingItem} ${page === index && styles.pagingActive}`}\n                onClick={() => setPage(index)}>\n                {index + 1}\n              </div>\n            )\n          } else if (page + 1 === index || index === 6) {\n            return <div style={{ lineHeight: '2rem' }}>...</div>\n          } else {\n            return null\n          }\n        })}\n        <div\n          onClick={() => {\n            if (totalPage <= page + 1) return\n            setPage(page + 1)\n          }}\n          className={styles.pagingItem}>下一页</div>\n      </div>\n    )\n  }\n  return (\n    <Layout location={location} title={siteTitle}>\n      {/* <SEO title=\"M ~\" /> */}\n      {renderPage()}\n      {renderPaging()}\n    </Layout>\n  )\n}\n\nexport default BlogIndex\n\nexport const pageQuery = graphql`\n  query {\n    site {\n      siteMetadata {\n        title\n      }\n    }\n    allMarkdownRemark(sort: { fields: [frontmatter___date], order: DESC }) {\n      edges {\n        node {\n          excerpt\n          fields {\n            slug\n          }\n          frontmatter {\n            date(formatString: \"MMMM DD, YYYY\")\n            title\n            description\n          }\n        }\n      }\n    }\n  }\n`\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"pagingBox\":\"index-module--pagingBox--2Yh7Y\",\"pagingItem\":\"index-module--pagingItem--2PngO\",\"pagingActive\":\"index-module--pagingActive--3Jbc7\"};"],"sourceRoot":""}