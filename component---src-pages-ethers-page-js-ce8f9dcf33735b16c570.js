(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"5fsd":function(e,t,n){"use strict";n.r(t);var r=n("HaE+"),a=n("o0o1"),c=n.n(a),o=n("2/Rp"),u=n("q1tI"),s=n.n(u),i=n("Bl7J"),l=n("tsqr"),f=function(){var e=window.ethereum;return e||(l.b.destroy(),void l.b.error("未检测到ethereum工具"))},p=function(){var e=Object(r.a)(c.a.mark((function e(){var t,n,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=f(),e.next=4,t.request({method:"eth_requestAccounts"});case 4:return n=e.sent,r=n[0],localStorage.setItem("wallet",r),e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),l.b.destroy(),l.b.warning("Unlock  Wallet, Please unlock your  Wallet to perform this action."),e.abrupt("return","");case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.on("accountsChanged",function(){var e=Object(r.a)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t[0],localStorage.setItem("wallet",n);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:return e.next=7,t.on("chainChanged",function(){var e=Object(r.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.location.reload(),e.next=3,window.history.go(0);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h={getEthereum:f,connectWallet:p,listenAccountsChanged:w};t.default=function(){var e=Object(u.useState)(""),t=e[0],n=e[1];Object(u.useEffect)((function(){h.listenAccountsChanged()}),[]),Object(u.useEffect)((function(){return window.addEventListener("storage",a),function(){window.removeEventListener("storage",a)}}),[]);var a=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("change"),e.next=3,localStorage.getItem("wallet");case 3:t=e.sent,n(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return s.a.createElement(i.a,{title:"EthersPage"},t,s.a.createElement(o.a,{onClick:Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.connectWallet();case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})))},"connectWallet"),s.a.createElement(o.a,{onClick:Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.getItem("wallet");case 2:t=e.sent,console.log(t);case 4:case"end":return e.stop()}}),e)})))},"localStorage"))}}}]);
//# sourceMappingURL=component---src-pages-ethers-page-js-ce8f9dcf33735b16c570.js.map