(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{ij7m:function(e,t,n){"use strict";n.r(t);var r,i,a,o=n("HaE+"),l=n("o0o1"),u=n.n(l),c=n("q1tI"),d=n.n(c),s=n("Bl7J"),m=(n("91UR"),n("Oy/b")),f=n.n(m),p=(n("fNIL"),n("i+YI"),n("wOnQ")),g=n.n(p),w=n("kLXV"),b=n("5rEg"),h=n("ECub"),v=n("/jd4");"undefined"!=typeof window&&(a=(i=n("rmP6")).Quill,window.Quill=a),"undefined"!=typeof window&&window.Quill&&(r=n("8xju").default,a.register("modules/imageResize",r),a.register("modules/imageExtend",v.a));t.default=function(){if("undefined"==typeof window||!window.Quill)return d.a.createElement(d.a.Fragment,null);var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useState)(""),r=(n[0],n[1]),a=Object(c.useState)(!1),l=a[0],m=a[1],p=Object(c.useState)(""),E=p[0],x=p[1];Object(c.useEffect)((function(){window.katex=f.a}),[]);var y=Object(c.useMemo)((function(){return{toolbar:{container:[["bold","italic","underline","strike"],[{header:1},{header:2}],[{script:"sub"},{script:"super"}],[{color:[]}],[{align:[]}],["image","formula"],["print"]],handlers:{image:function(){v.b.emit(e.current.editor.id)},formula:function(){m(!0)},print:function(){var e=document.getElementById("print_iframe");e||(e=document.createElement("IFRAME"));var t=document.getElementById("quill").getElementsByClassName("ql-editor"),n=null;e.setAttribute("id","print_iframe"),e.setAttribute("style","position:absolute;width:0px;height:0px;left:-500px;top:-500px;"),document.body.appendChild(e),(n=e.contentWindow.document).write(t[0].innerHTML),n.close(),e.contentWindow.focus(),setTimeout((function(){e.contentWindow.print()}),50),navigator.userAgent.indexOf("MSIE")>0&&document.body.removeChild(e)}}},imageResize:!0,imageExtend:{}}}),[]);Object(c.useEffect)((function(){O()}),[E]);var O=function(){if(E){var e=t.current.editor,n=e.insertEmbed(0,"formula",E);e.setContents(n)}},j=function(){var t=Object(o.a)(u.a.mark((function t(){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=document.querySelector("#read_latex .ql-editor p"),g()(n,{}).then((function(t){var n=document.getElementById("read_canvas");n&&n.parentElement.removeChild(n),t.id="read_canvas",document.body.appendChild(t);var r=document.getElementById("read_image");r&&r.parentElement.removeChild(r);var i=new Image;i.src=t.toDataURL("image/png"),i.id="read_image";var a=e.current.editor,o=a.getSelection(!0);if(null!=o){var l=o.index+o.length;a.insertEmbed(l,"image",i.src),a.insertText(l+1," "),a.setSelection(l+2),x(""),m(!1)}}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var t=Object(o.a)(u.a.mark((function t(){var n,r,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.current.editor,null!=(r=n.getSelection(!0))&&(i=r.index+r.length,n.insertEmbed(i,"formula",E),n.insertText(i+1," "),n.setSelection(i+2),x(""),m(!1));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return d.a.createElement(s.a,{title:"QuillDemo"},d.a.createElement(w.a,{title:"Latex",visible:l,onOk:j,okText:"保存为图片",cancelText:"保存为公式",onCancel:C},d.a.createElement(b.a,{value:E,placeholder:"latex",style:{marginBottom:10},onChange:function(e){return x(e.target.value)}}),E?d.a.createElement(i,{theme:"bubble",ref:t,id:"read_latex",readOnly:!0,onChange:r}):d.a.createElement(h.a,{description:"latex",imageStyle:{height:50}})),d.a.createElement(i,{theme:"snow",ref:e,id:"quill",style:{height:"calc(100vh - 202px)",marginTop:15},onChange:r,modules:y}))}}}]);
//# sourceMappingURL=component---src-pages-quill-demo-js-32825e3b37d4928d3c93.js.map